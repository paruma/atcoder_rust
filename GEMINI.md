# Gemini プロジェクト設定

## 1. プロジェクトの基本

### 1.1. 概要

これは、AtCoderのような競技プログラミングのコンテスト問題をRust言語で解くためのリポジトリです。
コンテスト問題のコードに加えて、ライブラリも同梱されています。

### 1.2. ディレクトリ構成

- `src/contest/YYYY/abcXXX/q/q.rs`: `YYYY`年に開催されたコンテスト`abcXXX`の問題`q`の解答ファイル。
- `src/mylib/`: 再利用可能なモジュールやコードスニペット（例: グラフアルゴリズム、データ構造）。
- `src/example/`: 特定のアルゴリズムやデータ構造の練習用コード。
- `Cargo.toml`: プロジェクトの依存関係と各問題のバイナリターゲットを定義。
- `contest.py`: コンテスト用のディレクトリとファイルをセットアップするためのヘルパースクリプト。

## 2. 開発の進め方

### 2.1. 基本ルール

- **実装指示の尊重**: 具体的な実装指示があるまで、ファイルへの書き込みは行わないでください。ユーザーの意図を慎重に判断し、不明な場合は実装方針を提案して同意を得てください。
- **コメント**: ソースコード内のコメントは原則日本語でお願いします。開発中にのみ役立つ一時的なコメントは、作業完了時に削除してください。
- **Git利用**: `git commit`など、リポジトリに副作用を及ぼすコマンドは使用しないでください。
- **ファイル管理**: 作業中に作成したスクリプトファイルや、実装途中のコードは、ユーザーの確認が済むまで削除しないでください。
- **計算量への配慮**: 競技プログラミングでは計算量が重要です。計算量が異なるアルゴリズムは、機能が同じでも別物として扱います。

### 2.2. ライブラリ開発

ライブラリのコードを編集した際は、以下の手順を遵守してください。

1. **テストの実行**: 該当するテスト（`#[ignore]`も含む）を実行してください。
2. **フォーマッタの適用**: `cargo fmt` を実行してください。
3. **差分の確認**: `git diff` を使用して、意図しない変更がないか確認してください。関係のないファイルに変更があった場合は、ユーザーに報告・確認してください。

### 2.3. コーディング規約

- **`rand` クレートの利用**: `rand` クレートのバージョンは `0.9.0` です。古い記法は使用しないでください。
    - `rng.random_range` を使用してください (`rng.gen_range` は不可)。
    - `from_os_rng` を使用してください (`from_entropy` は不可)。
- **ランダムテスト**: ランダムテストを実装する際には `#[ignore]` 属性を付与してください。

## 3. コマンドリファレンス

### 3.1. よく使うコマンド

- **コードのフォーマット**:
  ```bash
  cargo fmt
  ```
- **ライブラリのテスト**:
  - 通常のテスト:
    ```bash
    cargo test --package atcoder_rust --lib -- mylib::segtree_lib::lazy_segtree::range_update_range_sum::test_range_update_range_sum::test_random_update --exact --show-output
    ```
  - `ignored` 指定のテスト:
    ```bash
    cargo test --package atcoder_rust --lib -- mylib::segtree_lib::lazy_segtree::range_update_range_sum::test_range_update_range_sum::test_random_update --exact --show-output --ignored
    ```

## 4. 開発環境

### 4.1. サンドボックス環境

- Rust と Python (pip, venv) が利用可能です。
- サンドボックス環境の詳細は `.gemini/Dockerfile` を参照してください。
- Pythonでサードパーティライブラリを使用する場合は、`.venv-gemini` の仮想環境を利用してください。

### 4.2. ソースコードの場所

- **サードパーティクレート**: `/home/node/.cargo` にあります。`read_file`で読めない場合は `cat` コマンドを使用してください（`cargo build`が事前に必要です）。
- **標準ライブラリ**: `/home/node/.rustup` にあります。`read_file`で読めない場合は `cat` コマンドを使用してください（`rustup component add rust-src` が必要になる場合があります）。