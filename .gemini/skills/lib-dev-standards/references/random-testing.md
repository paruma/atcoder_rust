# ランダムテスト実装ガイドライン

ランダムテストは、手動テストでは網羅しきれない多様な入力パターンを自動生成し、予期しないバグを検出するための強力な手段である。

## 1. 目的
- 開発者の予期しないバグの発見。
- シンプルで自明なリファレンス実装（計算量を考慮しない愚直な実装）と比較することで、高度なデータ構造の正当性を保証する。

## 2. リファレンス実装の簡潔さ
- リファレンス実装は、最適化よりも**理解しやすさと正当性の自明さ**を最優先する。
- 複雑なデータ構造のコア機能を、最も直接的な方法で模倣する。

## 3. テストデータの設計
- **データサイズを小さくする**: データ構造のサイズ（例: `len`）を `1..=30` 程度の小さな範囲に設定することで、操作の重なりや隣接（エッジケース）が発生しやすくなり、デバッグも容易になる。
- **値を小さくする**: 0 などのコーナーケースが頻出するように、生成する値の範囲を適切に絞る。

## 4. 再現性の確保
- 乱数シードを固定（例: `StdRng::seed_from_u64(42)`）し、失敗時に再現可能にする。

## 5. デバッグ効率
- `assert!` メッセージには、失敗時の入力パラメータや内部状態を含め、再現と原因特定を迅速化する。

## 6. 実行時間の管理
- ランダムテストを含め、ファイル単位のテスト実行時間は **0.2秒以内** に収めること。
- 重いテストには `#[ignore]` を付与し、必要に応じて `--include-ignored` で実行する。
