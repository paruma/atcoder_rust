# snippet_linter

このディレクトリには、ライブラリ開発を補助するためのツールを置いています。

## 概要

`cargo-snippet` を使ってコードを管理する上での制約をチェックする Linter です。

### 何をチェックするか

`#[snippet]` 属性がついたモジュール内で、`use crate::...` というインポートが行われていないかを監視します。

**理由:**  
`cargo-snippet` でコードを展開して AtCoder 等に提出する際、展開後のファイルには元の `mylib` クレートが存在しません。そのため、`use crate::...` と書かれたコードは展開先でコンパイルエラーになります。これを防ぐため、スニペット対象のモジュール内では `super::` などを使った相対的な指定をする必要があります。

### 使い方

プロジェクトのルートディレクトリで以下を実行してください。

```bash
cargo run --bin snippet_linter
```

デフォルトでは `src/mylib` 以下をスキャンします。対象を変えたい場合は引数で指定できます。

```bash
cargo run --bin snippet_linter -- src/other_dir
```

### 注意点

- `mod tests` や `#[cfg(test)]` の中にある `use crate::` は、スニペットに含まれないためチェック対象から除外しています。
- ネストしたモジュールにも対応していますが、親モジュールに `#[snippet]` がついている場合はその中身すべてがチェック対象になります。
